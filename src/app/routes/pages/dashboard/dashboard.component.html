<div *ngIf="this.user" class="container">
  <div class="row">
    <div class="col-sm mb-3 mt-2">
      <mat-card #bg class="">
        <mat-card-header>
          <!-- <mat-card-title> -->
          <h1>Welcome, {{this.user.firstName}}</h1>
          <!-- </mat-card-title> -->
        </mat-card-header>
        <mat-card-content style="font-size: 18px">
          <!-- <mat-divider [inset]="true"></mat-divider> -->
          <br/>
          <div class="row">
            <div class="col-sm-6">
              <span *ngIf="this.batch">Current Batch: {{this.batch.name}}</span>
            </div>
            <div class="col-sm-6">
              <button mat-raised-button style="float: right" color="primary" routerLink="../calendar">View Calendar
                <mat-icon>event</mat-icon>
              </button>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <div class="row">
    <div class="col-sm">
      <mat-card class="rounded">
        <mat-card-header>
          <mat-toolbar style="background-color: rgba(0, 0, 0, 0); height: 50%;">
            <span>
              <h4 style="font-size: 140%;">Personal Information</h4>
            </span>
            <span style="flex: 1 1 auto;"></span>
            <span>
              <button mat-button (click)="toggleEdit()">
                <i class="material-icons" style="color: white;">
                  border_color
                </i>
              </button>
            </span>
          </mat-toolbar>
        </mat-card-header>
        <mat-card-content>

          <div *ngIf="!editing">
            <mat-list dense>
              <mat-list-item>
                <div class="col-3">
                  <h6>First Name: </h6>
                </div>
                <div class="col-9 text-left">
                  <h6>{{this.user.firstName}}</h6>
                </div>
              </mat-list-item>
              <mat-list-item>
                <div class="col-3">
                  <h6>Last Name: </h6>
                </div>
                <div class="col-9 text-left">
                  <h6>{{this.user.lastName}}</h6>
                </div>
              </mat-list-item>
              <mat-list-item>
                <div class="col-3">
                  <h6>Email:</h6>
                </div>
                <div class="col-9 text-left">
                  <h6>{{ this.user.email }}</h6>
                </div>
              </mat-list-item>
            </mat-list>
            <div mat-actions style="opacity: 0;">
              <button mat-raised-button (click)="cancelEdit()" class="mr-2">Cancel</button>
              <button mat-raised-button color="primary" (click)="saveChanges()">Ok</button>
            </div>
          </div>

          <div *ngIf="editing">
            <mat-list dense>
              <mat-list-item>
                <div class="col-3">
                  <h6>First Name: </h6>
                </div>
                <div class="col-9 text-left">
                  <mat-form-field class="example-full-width">
                    <input matInput [(ngModel)]="this.user.firstName" placeholder="First Name" maxlength="30">
                  </mat-form-field>
                </div>

              </mat-list-item>
              <mat-list-item>
                <div class="col-3">
                  <h6>Last Name: </h6>
                </div>
                <div class="col-9 text-left">
                  <mat-form-field class="example-full-width">
                    <input matInput [(ngModel)]="this.user.lastName" placeholder="Last Name" maxlength="30">
                  </mat-form-field>
                </div>
              </mat-list-item>
              <mat-list-item>
                <div class="col-3">
                  <h6>Email:</h6>
                </div>
                <div class="col-9 text-left">
                  <h6>{{ this.user.email }}</h6>
                </div>
              </mat-list-item>
            </mat-list>
            <div mat-actions>
              <button mat-raised-button (click)="cancelEdit()" class="mr-2">Cancel</button>
              <button mat-raised-button color="primary" (click)="saveChanges()">Ok</button>
            </div>
          </div>

        </mat-card-content>
      </mat-card>
    </div>

    <div class="col-sm">
      <mat-card class="rounded">
        <mat-card-header>
          <mat-toolbar style="background-color: rgba(0, 0, 0, 0); height: 50%;">
            <span>
              <h4 style="font-size: 140%;">Batch Information</h4>
            </span>
          </mat-toolbar>
        </mat-card-header>
        <mat-card-content>
          <mat-list dense>
            <mat-list-item>
              <h6 *ngIf="this.batch">Current Batch: {{this.batch.name}}</h6>
            </mat-list-item>
            <mat-list-item>
              <h6 *ngIf="this.batch">Batch Week: #{{this.batchWeek}}</h6>
            </mat-list-item>
            <mat-list-item>
              <h6 *ngIf="this.batch">Start Date: {{this.batch.startDate | date}}</h6>
            </mat-list-item>
            <mat-list-item>
              <h6 *ngIf="this.batch">End Date: {{this.batch.endDate | date}}</h6>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <div class="row">
    <div class="col-sm mt-3">
      <mat-card class="rounded">
        <mat-card-header>
          <mat-card-title>
            <h4>Batch Progress</h4>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list dense>
            <mat-list-item>
              <h5>Progress By Day</h5>
            </mat-list-item>
            <mat-list-item>
              <h6>{{this.percentCompletion | percent}} Completed</h6>
            </mat-list-item>
          </mat-list>
          <mat-progress-bar mode="determinate" [value]="this.percentCompletion * 100"></mat-progress-bar>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>